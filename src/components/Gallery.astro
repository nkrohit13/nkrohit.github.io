---
// src/components/gallery/Gallery.astro
interface Props {
    images: Array<{
        src: string;
        alt: string;
        title?: string;
        description?: string;
    }>;
    columns?: number;
}

const { images, columns = 3 } = Astro.props;
const gridColumns = `repeat(${columns}, minmax(0, 1fr))`;
---

<div class="gallery-container">
    <div class="gallery-grid" style={`--grid-columns: ${gridColumns}`}>
        {
            images.map((image, index) => (
                <div class="gallery-item group">
                    <img src={image.src} alt={image.alt} class="gallery-image" loading="lazy" />
                    {(image.title || image.description) && (
                        <div class="gallery-overlay">
                            {image.title && <h3 class="gallery-title">{image.title}</h3>}
                            {image.description && <p class="gallery-description">{image.description}</p>}
                        </div>
                    )}
                </div>
            ))
        }
    </div>
</div>

<style>
    .gallery-container {
        @apply container mx-auto px-4 py-8;
    }

    .gallery-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 1.5rem;
    }

    .gallery-item {
        @apply relative overflow-hidden rounded-lg shadow-lg;
        aspect-ratio: 1/1;
        transition: transform 0.3s ease;
    }

    .gallery-item:hover {
        transform: translateY(-4px);
    }

    .gallery-image {
        @apply w-full h-full object-cover transition-all duration-300;
    }

    .gallery-overlay {
        @apply absolute inset-0 bg-black bg-opacity-0 flex flex-col justify-end p-4 text-white transition-all duration-300;
    }

    .gallery-item:hover .gallery-overlay {
        @apply bg-opacity-60;
    }

    .gallery-title {
        @apply text-lg font-bold mb-1 opacity-0 translate-y-4 transition-all duration-300;
    }

    .gallery-description {
        @apply text-sm opacity-0 translate-y-4 transition-all duration-300;
    }

    .gallery-item:hover .gallery-title,
    .gallery-item:hover .gallery-description {
        @apply opacity-100 translate-y-0;
    }

    @media (max-width: 768px) {
        .gallery-grid {
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
        }
    }

    @media (max-width: 480px) {
        .gallery-grid {
            grid-template-columns: 1fr;
        }
    }
</style>
